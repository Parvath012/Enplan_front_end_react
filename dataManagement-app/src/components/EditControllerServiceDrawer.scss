// Hide Panel's default header and footer since we use custom ones
.edit-controller-service-drawer-panel {
  .panel__header {
    display: none !important;
  }
  
  .panel__actions {
    display: none !important;
  }
  
  .panel__content {
    padding: 0 !important;
    height: 100% !important;
    overflow: hidden !important;
  }
}

.edit-controller-service-drawer {
  position: relative;
  width: 100%;
  height: 100%;
  background: inherit;
  background-color: #ffffff;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;

  // Header
  &__header {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 588px;
    height: 40px;
    background: inherit;
    background-color: #ffffff;
    box-sizing: border-box;
    border-width: 1px;
    border-style: solid;
    border-color: rgba(242, 242, 240, 1);
    border-top: 0px;
    border-left: 0px;
    border-right: 0px;
    border-radius: 0px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    z-index: 10;
  }

  &__title {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 650;
    font-style: normal;
    font-size: 40px;
    color: #4A4E52;
    text-align: left;
    line-height: 1.2;
    margin: 0;
    display: flex;
    align-items: center;
    height: 100%;
  }

  &__close-button {
    width: 30px !important;
    height: 30px !important;
    border-radius: 8px !important;
    color: #6c757d !important;
    background-color: transparent !important;
    padding: 0 !important;
    margin: 0 !important;
    cursor: pointer !important;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    
    // Disable ripple effect
    &::before,
    &::after {
      display: none !important;
    }
    
    &:hover {
      color: #495057 !important;
      background-color: #f0f0f0 !important;
    }
    
    &:active,
    &:focus {
      transform: none !important;
      transition: none !important;
    }
    
    .MuiIconButton-root {
      width: 30px !important;
      height: 30px !important;
      padding: 0 !important;
      
      // Disable MUI ripple effect
      &::before,
      &::after {
        display: none !important;
      }
      
      // Disable MUI ripple classes
      .MuiTouchRipple-root {
        display: none !important;
      }
    }
  }

  // Tabs Container
  &__tabs-container {
    position: absolute;
    top: 40px;
    left: 0;
    width: 588px;
    background-color: #ffffff;
    border-bottom: 1px solid rgba(242, 242, 240, 1);
    z-index: 9;
    overflow: visible; // Ensure underline is visible
  }

  &__tabs {
    position: relative;
    min-height: 40px;
    
    .MuiTabs-flexContainer {
      position: relative;
      overflow: visible;
    }
    
    .MuiTab-root {
      font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-weight: 400;
      font-style: normal;
      font-size: 13px; // Match admin-app Header tab font size
      letter-spacing: normal;
      color: #333333;
      text-align: center;
      line-height: normal;
      text-transform: none;
      text-decoration: none;
      padding: 5px 16px; // Add horizontal padding like admin-app Header
      min-height: 40px;
      position: relative;
      transition: none !important; // Remove transitions to prevent flicker
      -webkit-tap-highlight-color: transparent !important;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      
      // Disable ripple effect - only disable ::before, keep ::after for underline
      &::before {
        display: none !important;
      }
      
      // Disable MUI ripple classes
      .MuiTouchRipple-root {
        display: none !important;
      }
      
      // Remove any background transitions
      background-color: transparent !important;
      margin-left: 0; // Remove default margin
      overflow: visible; // Ensure underline is visible
      
      // First tab spacing
      &:first-of-type {
        margin-left: 0;
      }
      
      // Spacing between tabs (like admin-app Header with 12px margin)
      &:not(:first-of-type) {
        margin-left: 12px;
      }
      
      &:hover {
        color: rgba(0, 111, 230, 1);
        transform: none !important; // Remove transform to prevent flicker
        transition: none !important; // Remove transition to prevent flicker
        background-color: transparent !important;
      }
      
      &:active {
        transform: none !important; // Remove transform to prevent flicker
        transition: none !important; // Remove transition to prevent flicker
        background-color: transparent !important;
      }
      
      &:focus {
        transform: none !important; // Remove transform to prevent flicker
        transition: none !important; // Remove transition to prevent flicker
        outline: none !important; // Remove focus outline
      }
      
      &.Mui-selected {
        color: rgba(0, 111, 230, 1);
        font-weight: 400;
      }
      
      // Underline indicator using ::after
      &::after {
        content: '';
        position: absolute;
        bottom: 0; // Position at the bottom border to touch the underline
        left: 0;
        width: 100%;
        height: 2px;
        background-color: transparent;
        transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                    transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        opacity: 0;
        z-index: 2;
        transform: scaleX(0); // Start with zero width for animation
        transform-origin: center;
      }
      
      &.Mui-selected::after {
        background-color: rgba(0, 111, 230, 1);
        opacity: 1;
        transform: scaleX(1); // Animate to full width
      }
    }

    .MuiTabs-indicator {
      display: none !important; // Hide default MUI indicator, use ::after pseudo-element instead
    }
  }
  
  // Tab content animation
  &__tab-panel {
    width: 100%;
    animation: fadeIn 0.3s ease-in-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(5px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  // Content
  &__content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 102px 16px 80px 16px; // Top padding for header (40px) + tabs (40px) + gap (22px), bottom for footer
    display: flex;
    flex-direction: column;
    width: 100%;
    box-sizing: border-box;
  }

  // Settings Tab
  &__settings {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  // Field
  &__field {
    display: flex;
    flex-direction: column;
    gap: 0; // Remove gap - label-row margin-bottom handles spacing
  }

  &__label {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 500; // Match entity setup-app
    font-size: 12px;
    color: #5F6368; // Match entity setup-app (was #4A4E52)
    line-height: 18px;
    margin-bottom: 0; // Remove margin since label-row handles it
    display: inline-block; // Allow label to sit next to icon
    flex-shrink: 0; // Prevent label from shrinking
    height: 18px; // Fixed height for consistent alignment
  }

  &__label-row {
    display: flex;
    align-items: center;
    gap: 6px;
    width: 100%;
    margin-bottom: 8px; // Match entity setup spacing (8px between label and field)
  }

  // ID Field with copy button
  &__id-field {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
  }

  &__input {
    flex: 1;
    width: 100%;
    height: 30px;
    padding: 8px 12px;
    border: 1px solid #E0E0E0;
    border-radius: 8px;
    background-color: #ffffff;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: rgb(158, 158, 158); // #9e9e9e
    cursor: default;
    box-sizing: border-box;
    user-select: none;
    -webkit-text-fill-color: rgb(158, 158, 158);

    &:focus {
      outline: none;
      border: 1px solid #E0E0E0;
    }

    &:hover {
      border: 1px solid #E0E0E0;
    }

    &:disabled {
      color: #5f6368 !important;
      -webkit-text-fill-color: #5f6368 !important;
    }
  }

  // Style TextField components from common-app
  .form-field__input {
    .MuiInputBase-input {
      padding: 8px 12px;
      font-size: 12px;
      color: rgb(158, 158, 158);
      font-weight: 400;
      font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      user-select: none;
    }

    &--disabled .MuiInputBase-input {
      color: #5f6368 !important;
    }
  }

  &__copy-button {
    width: 30px;
    height: 30px;
    border: none;
    background-color: transparent;
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: background-color 0.1s ease;
    flex-shrink: 0;

    &:hover {
      background-color: #f0f0f0;
    }

    &:focus {
      outline: 2px solid #0051AB;
      outline-offset: 2px;
    }

    svg {
      color: #6c757d;
      pointer-events: none;
    }
  }

  // Supported Services
  &__supported-services {
    width: 100%;
  }

  &__supported-list {
    list-style: none;
    padding: 0;
    margin: 0;
    
    li {
      font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 12px;
      font-weight: 400;
      color: #4A4E52;
      line-height: 18px;
      padding: 4px 0;
      position: relative;
      padding-left: 16px;

      &::before {
        content: 'â€¢';
        position: absolute;
        left: 0;
        color: #6c757d;
      }
    }
  }

  &__no-supported {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #9e9e9e;
    line-height: 18px;
  }

  // Info Icon Button
  &__info-icon-button {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-left: 0; // Remove margin - gap handles spacing
    margin-right: 0;

    svg {
      pointer-events: none;
      color: #6c757d;
      transition: color 0.1s ease;
    }

    &:hover svg {
      color: #87ceeb;
    }
  }

  // Properties Tab
  &__properties {
    width: 100%;
  }

  &__properties-content {
    display: flex;
    gap: 24px;
    width: 100%;
  }

  &__properties-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  &__properties-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }

  &__properties-title {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 650;
    font-size: 12px;
    color: #4A4E52;
    line-height: 18px;
  }

  &__properties-table {
    width: 100%;
    border: 1px solid #E0E0E0;
    border-radius: 8px;
    overflow: hidden;
  }

  &__properties-table-inner {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  &__property-header,
  &__value-header {
    padding: 12px 16px;
    background-color: #ffffff;
    font-weight: 650;
    font-size: 12px;
    color: #4A4E52;
    text-align: left;
    border-bottom: 1px solid #E0E0E0;
  }

  &__property-header {
    width: 40%;
  }

  &__value-header {
    width: 60%;
  }

  &__property-row {
    border-bottom: 1px solid #E0E0E0;
    
    &:last-child {
      border-bottom: none;
    }
  }

  &__property-name {
    padding: 12px 16px;
    font-size: 12px;
    font-weight: 400;
    color: #4A4E52;
    vertical-align: middle;
  }

  &__property-value-cell {
    padding: 12px 16px;
    vertical-align: middle;
  }

  &__property-value-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
  }

  &__property-value-display {
    flex: 1;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #4A4E52;
    padding: 0;
    line-height: 18px;
    word-break: break-word;
  }

  &__property-value-empty {
    font-style: italic;
    color: #9e9e9e;
    font-weight: 400;
  }

  &__property-input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid #E0E0E0;
    border-radius: 4px;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: rgb(158, 158, 158); // #9e9e9e
    user-select: none;
    
    &:focus {
      outline: none;
      border: 1px solid #0051AB;
    }

    &:disabled {
      color: #5f6368 !important;
    }
  }

  &__properties-verification {
    width: 200px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex-shrink: 0;
  }

  &__verification-header {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: flex-end;
  }

  &__verification-button {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.2s ease;
    
    &:hover:not(:disabled) {
      opacity: 0.7;
    }
    
    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }
  }

  &__verification-add-icon {
    color: #24A148; // Green color for plus icon
  }

  &__verification-check-icon {
    color: #24A148; // Green color for checkmark
  }

  &__verification-title {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 650;
    font-size: 12px;
    color: #4A4E52;
    flex: 1;
  }

  &__verification-box {
    padding: 16px;
    background-color: #ffffff;
    border: 1px solid #E0E0E0;
    border-radius: 8px;
  }

  &__verification-text {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    font-style: italic;
    color: #9e9e9e;
    line-height: 18px;
  }

  &__verification-error {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #d32f2f;
    line-height: 18px;
  }

  &__verification-results {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #4A4E52;
    line-height: 18px;
    max-height: 300px;
    overflow-y: auto;
  }

  &__no-properties {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #9e9e9e;
    line-height: 18px;
    text-align: center;
    padding: 40px 0;
  }

  // Comments Tab
  &__comments {
    width: 100%;
  }

  &__comments-textarea {
    width: 100%;
    min-height: 200px;
    padding: 8px 12px;
    border: 1px solid #E0E0E0;
    border-radius: 8px;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #4A4E52;
    resize: vertical;
    box-sizing: border-box;

    &:focus {
      outline: none;
      border: 1px solid #0051AB;
    }
  }

  // Loading and Error
  &__loading {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 400;
    font-size: 12px;
    color: #6c757d;
    padding: 12px;
    text-align: center;
  }

  &__error {
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 400;
    font-size: 12px;
    color: #d32f2f;
    padding: 8px 12px;
    background-color: #ffffff;
    border-radius: 4px;
    border-left: 3px solid #d32f2f;
  }

  // Footer
  &__footer {
    position: absolute;
    left: 0px;
    bottom: 0px;
    width: 588px;
    height: 46px;
    background: inherit;
    background-color: #ffffff;
    box-sizing: border-box;
    border-width: 1px;
    border-style: solid;
    border-color: rgba(242, 242, 240, 1);
    border-top: 1px solid rgba(242, 242, 240, 1);
    border-left: none;
    border-right: none;
    border-bottom: none;
    border-radius: 0px;
    font-family: 'Inter18pt-SemiBold', 'Inter 18pt SemiBold', 'Inter 18pt', sans-serif;
    font-weight: 650;
    font-style: normal;
    font-size: 14px;
    color: #5B6061;
    text-align: left;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    z-index: 10;
  }

  &__cancel-button {
    // Match Reset button from create process group (layout.tsx) with improved width for "Cancel" text
    font-family: 'ArialMT', 'Arial', sans-serif;
    font-weight: 400;
    width: 55px; // Increased from 40px to better accommodate "Cancel" text and improve highlighting
    min-width: 55px; // Ensure minimum width
    height: 24px;
    font-style: normal;
    font-size: 13px;
    letter-spacing: normal;
    color: #1976d2;
    vertical-align: none;
    text-align: center;
    line-height: normal;
    text-transform: none;
    padding: 0 4px; // Add horizontal padding for better highlighting area
    border-radius: 6px;
    margin-left: 8px;
    border: none;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s, color 0.2s;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    box-sizing: border-box; // Ensure padding is included in width
    
    // Disable ripple effect
    &::before,
    &::after {
      display: none !important;
    }
    
    &:hover {
      background-color: rgba(120, 172, 244, 1);
      color: #fff;
      // Ensure full width highlighting
      width: 55px;
      min-width: 55px;
    }
    
    &:active,
    &:focus {
      outline: none;
      background-color: rgba(120, 172, 244, 0.7);
      color: #fff;
      transition: none;
      // Ensure full width highlighting
      width: 55px;
      min-width: 55px;
    }

    &:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background-color: transparent;
      color: #1976d2;
    }
  }

  &__apply-button {
    // Match ListToolbar add button styles exactly
    width: 56px;
    height: 22px;
    background: rgba(0, 111, 230, 1);
    border: none;
    border-radius: 4px;
    color: #D0F0FF;
    font-family: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 500;
    font-style: normal;
    font-size: 12px;
    text-align: center;
    line-height: 20px;
    text-transform: none;
    min-width: 56px;
    padding: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: none;
    box-shadow: none;

    &:hover:not(:disabled) {
      background-color: rgba(0, 111, 230, 1);
    }

    &:active:not(:disabled),
    &:focus:not(:disabled) {
      background-color: rgba(0, 111, 230, 1);
      outline: none;
    }

    &:disabled {
      background-color: rgba(0, 111, 230, 0.6);
      color: #D0F0FF;
      cursor: not-allowed;
      opacity: 0.6;
    }
  }
}

// Override MUI Drawer styles
.MuiDrawer-paper.edit-controller-service-drawer-paper {
  width: 588px !important;
  max-width: 588px !important;
  height: 100vh !important;
  max-height: 100vh !important;
  position: absolute !important;
  right: 0px !important;
  top: 0px !important;
  left: auto !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  filter: none !important;
  background: inherit;
  background-color: #ffffff;
  box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: rgba(242, 242, 240, 1);
  border-top: 0px;
  border-radius: 0px;
  border-top-left-radius: 0px;
  border-top-right-radius: 0px;
  -moz-box-shadow: -5px 0px 14px rgba(204, 204, 204, 0.349019607843137);
  -webkit-box-shadow: -5px 0px 14px rgba(204, 204, 204, 0.349019607843137);
  box-shadow: -5px 0px 14px rgba(204, 204, 204, 0.349019607843137);
}

